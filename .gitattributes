###############################################################################
# .gitattributes — Vitte (Option B : officiel Linguist)
# - Détection GitHub Linguist sur Vitte
# - Normalisation EOL
# - Binaires & Git LFS (optionnel)
# - Règles diff/merge utiles
# - Export des archives
###############################################################################

########################################
# 0) Détection & Surlignage — Linguist #
########################################

# Extensions Vitte : affichage et stats en "Vitte"
*.vit    linguist-language=Vitte
*.vitte  linguist-language=Vitte

# Dossiers à exclure des statistiques
vendor/**           linguist-vendored
third_party/**      linguist-vendored
external/**         linguist-vendored

# Code généré (ne compte pas dans les stats)
generated/**        linguist-generated
dist/**             linguist-generated
build/**            linguist-generated
target/**           linguist-generated

# Documentation (ne biaise pas la barre des langages)
docs/**             linguist-documentation
**/*.md             linguist-documentation
**/*.rst            linguist-documentation
**/*.adoc           linguist-documentation

# Tests / exemples (facultatif : retire des stats pour plus de pureté)
tests/**            linguist-detectable=false
test/**             linguist-detectable=false
examples/**         linguist-detectable=false
samples/**          linguist-detectable=false
snippets/**         linguist-detectable=false

########################################
# 1) Fins de ligne & normalisation     #
########################################

# Par défaut : texte auto + LF
* text=auto eol=lf

# Scripts Windows (si présents)
*.bat  text eol=crlf
*.cmd  text eol=crlf
*.ps1  text eol=crlf

# Binaires (pas de conversion EOL)
*.png  binary
*.jpg  binary
*.jpeg binary
*.gif  binary
*.webp binary
*.ico  binary
*.pdf  binary
*.zip  binary
*.gz   binary
*.bz2  binary
*.xz   binary
*.7z   binary
*.rar  binary
*.tar  binary
*.jar  binary
*.wasm binary
*.bin  binary
*.exe  binary
*.dll  binary
*.dylib binary
*.so   binary
*.ttf  binary
*.otf  binary
*.woff binary
*.woff2 binary
*.mp3  binary
*.wav  binary
*.flac binary
*.mp4  binary
*.mov  binary
*.mkv  binary

########################################
# 2) Git LFS (optionnel)               #
########################################
# Décommente si tu utilises LFS :
# *.png  filter=lfs diff=lfs merge=lfs -text
# *.jpg  filter=lfs diff=lfs merge=lfs -text
# *.pdf  filter=lfs diff=lfs merge=lfs -text
# *.mp4  filter=lfs diff=lfs merge=lfs -text
# *.wasm filter=lfs diff=lfs merge=lfs -text

########################################
# 3) Règles de diff / merge utiles     #
########################################

# Changelogs : fusion safe
CHANGELOG   merge=union
CHANGELOG.* merge=union

# Lockfiles (option “ours” — décommente si tu l’assumes)
# package-lock.json  merge=ours -diff
# pnpm-lock.yaml     merge=ours -diff
# yarn.lock          merge=ours -diff
# Cargo.lock         merge=ours -diff
# Pipfile.lock       merge=ours -diff
# composer.lock      merge=ours -diff

# Markdown / textes : diff mot-à-mot
*.md  diff=word
*.rst diff=word
*.adoc diff=word
*.txt diff=word

# JSON : si diff json dispo, sinon commente
# *.json diff=json

# Artefacts générés : pas de diff
generated/** -diff
dist/**      -diff
build/**     -diff
target/**    -diff

# Submodules : vue compacte
**/.gitmodules text
**/*/         submodule

########################################
# 4) Export des archives (git archive) #
########################################
# Exclure les méta-fichiers de l’archive
.gitignore        export-ignore
.gitattributes    export-ignore
.github/**        export-ignore
.gitea/**         export-ignore
.gitlab/**        export-ignore
.vscode/**        export-ignore
.idea/**          export-ignore
.editorconfig     export-ignore
.prettier*        export-ignore
.eslintrc*        export-ignore
.stylelintrc*     export-ignore
.npmrc            export-ignore
.yarnrc*          export-ignore
pnpm-workspace.yaml export-ignore

# CI/CD
.ci/**              export-ignore
.github/workflows/** export-ignore
.gitlab-ci.yml      export-ignore
.circleci/**        export-ignore
azure-pipelines.yml export-ignore
Jenkinsfile         export-ignore

# Build/générés
build/**          export-ignore
dist/**           export-ignore
target/**         export-ignore
generated/**      export-ignore
coverage/**       export-ignore

# Docs sources (si tu publies ailleurs)
docs/**           export-ignore

########################################
# 5) Spécifiques Vitte                 #
########################################

# Bytecode/paquets Vitte
*.vitbc  binary -diff
*.vitpkg binary -diff

# Templates non représentatifs
templates/**  linguist-detectable=false
scaffold/**   linguist-detectable=false

########################################
# 6) Secrets / certificats             #
########################################
*.pem  -diff
*.key  -diff
*.p12  -diff
*.crt  -diff

########################################
# 7) Divers                            #
########################################
*.svg text
Makefile text eol=lf
*.sh     text eol=lf
*.csv    text eol=lf
*.tsv    text eol=lf
